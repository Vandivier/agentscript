(function(){var e=function(e,t){return function(){return e.apply(t,arguments)}};ABM.NLMouse=function(){function t(t,n){this.model=t,this.callback=n,this.handleMouseMove=e(this.handleMouseMove,this),this.handleMouseUp=e(this.handleMouseUp,this),this.handleMouseDown=e(this.handleMouseDown,this),this.div=this.model.div,this.start()}return t.prototype.resetParams=function(){return this.x=this.y=0/0,this.moved=this.down=!1},t.prototype.start=function(){return this.div.addEventListener("mousedown",this.handleMouseDown,!1),document.body.addEventListener("mouseup",this.handleMouseUp,!1),this.div.addEventListener("mousemove",this.handleMouseMove,!1),this.resetParams()},t.prototype.stop=function(){return this.div.removeEventListener("mousedown",this.handleMouseDown,!1),document.body.removeEventListener("mouseup",this.handleMouseUp,!1),this.div.removeEventListener("mousemove",this.handleMouseMove,!1),this.resetParams()},t.prototype.generalHandler=function(e,t,n){return this.down=t,this.moved=n,this.setXY(e),null!=this.callback?this.callback(e):void 0},t.prototype.handleMouseDown=function(e){return this.generalHandler(e,!0,!1)},t.prototype.handleMouseUp=function(e){return this.generalHandler(e,!1,!1)},t.prototype.handleMouseMove=function(e){return this.generalHandler(e,this.down,!0)},t.prototype.setXY=function(e){var t,n,o,s;return o=this.div.getBoundingClientRect(),t=e.clientX-o.left,n=e.clientY-o.top,s=this.model.patches.pixelXYtoPatchXY(t,n),this.x=s[0],this.y=s[1],s},t}()}).call(this);